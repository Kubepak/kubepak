# 'generic-application' Package

## Description

A package for generic application deployment. Because nobody can remember the Kubernetes YAML syntax.

## Values

| Name                                                                          | Type   | Default                                                                                   | Description                                                                |
|-------------------------------------------------------------------------------|--------|-------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
| generic-application.argo-cd.waitMaxAttempts                                   | int    | 120                                                                                       | Argo CD maximum wait attempts                                              |
| generic-application.pod.controller                                            | string | Deployment                                                                                | Controller: `Deployment`, `StatefulSet`, or `DaemonSet`                    |
| generic-application.pod.replicas                                              | int    | 1                                                                                         | Pod replicas                                                               |
| generic-application.pod.podManagementPolicy                                   | string |                                                                                           | Pod management policy (StatefulSet only)                                   |
| generic-application.pod.serviceName                                           | string |                                                                                           | Service name (StatefulSet only)                                            |
| generic-application.pod.annotations                                           | object | {}                                                                                        | Pod annotations                                                            |
| generic-application.pod.strategy                                              | object | {}                                                                                        | Pod update strategy                                                        |
| generic-application.pod.minReadySeconds                                       | int    |                                                                                           | Minimum number of seconds for which a newly created Pod should be ready    |
| generic-application.pod.revisionHistoryLimit                                  | int    |                                                                                           | Number of old ReplicaSets to retain to allow rollback                      |
| generic-application.pod.securityContext                                       | object | {}                                                                                        | Pod security context                                                       |
| generic-application.pod.terminationGracePeriodSeconds                         | int    |                                                                                           | Termination grace period seconds                                           |
| generic-application.pod.volumes                                               | list   | []                                                                                        | Pod volume                                                                 |
| generic-application.pod.initContainers                                        | list   | []                                                                                        | Init containers                                                            |
| generic-application.pod.container.image.registry                              | string | docker.io                                                                                 | Image registry                                                             |
| generic-application.pod.container.image.repository                            | string | nginx                                                                                     | Image repository                                                           |
| generic-application.pod.container.image.tag                                   | string |                                                                                           | Image tag                                                                  |
| generic-application.pod.container.image.pullPolicy                            | string | IfNotPresent                                                                              | Image pull policy                                                          |
| generic-application.pod.container.securityContext                             | object | {}                                                                                        | Container security context                                                 |
| generic-application.pod.container.command                                     | list   | []                                                                                        | Container command                                                          |
| generic-application.pod.container.args                                        | list   | []                                                                                        | Container arguments                                                        |
| generic-application.pod.container.env                                         | list   | []                                                                                        | Container environments                                                     |
| generic-application.pod.container.startupProbe                                | object | {}                                                                                        | Startup probe configuration                                                |
| generic-application.pod.container.livenessProbe                               | object | {}                                                                                        | Liveness probe configuration                                               |
| generic-application.pod.container.readinessProbe                              | object | {}                                                                                        | Readiness probe configuration                                              |
| generic-application.pod.container.resources                                   | object | {}                                                                                        | Resource requests and limits                                               |
| generic-application.pod.container.volumeMounts                                | list   | []                                                                                        | Pod volume mounts                                                          |
| generic-application.pod.additionalContainers                                  | list   | []                                                                                        | Additional containers                                                      |
| generic-application.pod.volumeClaimTemplates                                  | list   | []                                                                                        | Pod volume claim templates                                                 |
| generic-application.pod.dnsPolicy                                             | string |                                                                                           | Pod DNS policy                                                             |
| generic-application.pod.dnsConfig                                             | object | {}                                                                                        | Pod DNS config                                                             |
| generic-application.pod.nodeSelector                                          | object | {}                                                                                        | Node selection constraint                                                  |
| generic-application.pod.tolerations                                           | list   | []                                                                                        | Pod tolerations                                                            |
| generic-application.pod.affinity                                              | object | {}                                                                                        | Node affinity                                                              |
| generic-application.configMap                                                 | object | {}                                                                                        | Config map                                                                 |
| generic-application.configPath                                                | string | /conf                                                                                     | Config path                                                                |
| generic-application.serviceAccount.create                                     | bool   | true                                                                                      | Specifies whether a service account should be created                      |
| generic-application.serviceAccount.annotations                                | object | {}                                                                                        | Service account annotations                                                |
| generic-application.serviceAccount.name                                       | string | generic-application                                                                       | Service account name                                                       |
| generic-application.services[`{i}`].annotations                               | object | {}                                                                                        | Service annotations                                                        |
| generic-application.services[`{i}`].name                                      | string |                                                                                           | Service name                                                               |
| generic-application.services[`{i}`].type                                      | string |                                                                                           | Service type                                                               |
| generic-application.services[`{i}`].ports[`{j}`].name                         | string |                                                                                           | Service port name                                                          |
| generic-application.services[`{i}`].ports[`{j}`].protocol                     | string | TCP                                                                                       | Service protocol                                                           |
| generic-application.services[`{i}`].ports[`{j}`].port                         | int    |                                                                                           | Service port number                                                        |
| generic-application.services[`{i}`].ports[`{j}`].targetPort                   | int    |                                                                                           | Service target port                                                        |
| generic-application.services[`{i}`].loadBalancerIP                            | string |                                                                                           | Load balancer IP                                                           |
| generic-application.services[`{i}`].loadBalancerSourceRanges                  | list   | []                                                                                        | Load balancer source ranges                                                |
| generic-application.services[`{i}`].clusterIP                                 | string |                                                                                           | Cluster IP                                                                 |
| generic-application.ingress.host                                              | string | generic-application.\<environment\>.\<project\>.\<organization\>.local:<ingressHttpsPort> | Ingress host                                                               |
| generic-application.ingress.networkPlane                                      | string | public                                                                                    | Ingress network plane: `management`, `private`, or `public`                |
| generic-application.ingress.mappings[`{i}`].serviceName                       | string |                                                                                           | Ingress mapping service name                                               |
| generic-application.ingress.mappings[`{i}`].servicePort                       | int    |                                                                                           | Ingress mapping service port                                               |
| generic-application.ingress.mappings[`{i}`].grpc                              | bool   | false                                                                                     | Ingress mapping gRPC enabled flag                                          |
| generic-application.ingress.mappings[`{i}`].prefix                            | string | /                                                                                         | Ingress mapping prefix                                                     |
| generic-application.ingress.mappings[`{i}`].rewrite                           | string | /                                                                                         | Ingress mapping rewrite                                                    |
| generic-application.ingress.mappings[`{i}`].bypassAuth                        | bool   | true                                                                                      | Ingress mapping bypassAuth flag                                            |
| generic-application.ingress.mappings[`{i}`].timeoutMs                         | int    | 3000                                                                                      | Ingress mapping timeout in ms                                              |
| generic-application.ingress.mappings[`{i}`].idleTimeoutMs                     | int    | 3600000                                                                                   | Ingress mapping idle timeout in ms                                         |
| generic-application.ingress.mappings[`{i}`].connectTimeoutMs                  | int    | 3000                                                                                      | Ingress mapping connect timeout in ms                                      |
| generic-application.ingress.mappings[`{i}`].cors.credentials                  | bool   | false                                                                                     | Ingress CORS credentials flag                                              |
| generic-application.ingress.mappings[`{i}`].cors.exposedHeaders               | list   | []                                                                                        | Ingress CORS exposed headers                                               |
| generic-application.ingress.mappings[`{i}`].cors.headers                      | list   | []                                                                                        | Ingress CORS headers                                                       |
| generic-application.ingress.mappings[`{i}`].cors.maxAge                       | int    | 86400                                                                                     | Ingress CORS max age                                                       |
| generic-application.ingress.mappings[`{i}`].cors.methods                      | list   | []                                                                                        | Ingress CORS methods                                                       |
| generic-application.ingress.mappings[`{i}`].cors.origins                      | list   | []                                                                                        | Ingress CORS origins                                                       |
| generic-application.ingress.mappings[`{i}`].allowUpgrade                      | list   | []                                                                                        | List of non-HTTP protocols that can be upgraded from HTTP                  |
| generic-application.ingress.tcpMappings[`{i}`].serviceName                    | string |                                                                                           | TCP Ingress mapping service name                                           |
| generic-application.ingress.tcpMappings[`{i}`].servicePort                    | int    |                                                                                           | TCP Ingress mapping service port                                           |
| generic-application.ingress.tcpMappings[`{i}`].port                           | int    |                                                                                           | TCP Ingress mapping listening port                                         |
| generic-application.ingress.tcpMappings[`{i}`].idleTimeoutMs                  | int    | 3600000                                                                                   | TCP Ingress mapping idle timeout in ms                                     |
| generic-application.tls.ca.pem.srcFilePath                                    | string |                                                                                           | SSL/TLS trusted certificate authorities source file path (PEM bundle)      |
| generic-application.tls.ca.pem.dstFilePath                                    | string | /ssl/certs/ca-certificates.crt                                                            | SSL/TLS trusted certificate authorities destination file path (PEM bundle) |
| generic-application.tls.ca.trustStore.srcFilePath                             | string |                                                                                           | Java Trust Store source file path                                          |
| generic-application.tls.ca.trustStore.dstFilePath                             | string | /ssl/certs/truststore.jks                                                                 | Java Trust Store destination file path                                     |
| generic-application.horizontalPodAutoscaler.enabled                           | bool   | false                                                                                     | Autoscaling enabled flag                                                   |
| generic-application.horizontalPodAutoscaler.minReplicas                       | int    | 1                                                                                         | Minimum replicas                                                           |
| generic-application.horizontalPodAutoscaler.maxReplicas                       | int    | 100                                                                                       | Maximum replicas                                                           |
| generic-application.horizontalPodAutoscaler.targetCPUUtilizationPercentage    | int    | 80                                                                                        | Target CPU utilization percentage                                          |
| generic-application.horizontalPodAutoscaler.targetMemoryUtilizationPercentage | int    |                                                                                           | Target memory utilization percentage                                       |
| generic-application.podDisruptionBudget.enabled                               | bool   | false                                                                                     | PDB enabled flag                                                           |
| generic-application.podDisruptionBudget.maxUnavailable                        | int    | 1                                                                                         | Number of pods that can be unavailable after the eviction                  |
| generic-application.databases[`{i}`].auth.rootUsername                        | string |                                                                                           | Root database username                                                     |
| generic-application.databases[`{i}`].auth.rootPassword                        | string |                                                                                           | Root database password                                                     |
| generic-application.databases[`{i}`].auth.username                            | string |                                                                                           | Application database username                                              |
| generic-application.databases[`{i}`].auth.password                            | string |                                                                                           | Application database password                                              |
| generic-application.databases[`{i}`].id                                       | string | \<generic-application.databases[`{i}`].name\>                                             | Database ID                                                                |
| generic-application.databases[`{i}`].name                                     | string |                                                                                           | Database name                                                              |
| generic-application.databases[`{i}`].engine                                   | string |                                                                                           | Database engine: `mongodb`, `mysql`, or `postgresql`                       |
| generic-application.databases[`{i}`].hostname                                 | string |                                                                                           | Database hostname                                                          |
| generic-application.databases[`{i}`].port                                     | int    | 27017 (mongodb), 3306 (mysql), or 5432 (postgresql)                                       | Database port                                                              |
| generic-application.databases[`{i}`].options                                  | string |                                                                                           | Database options                                                           |
| generic-application.databases[`{i}`].mode                                     | string | rw                                                                                        | Database mode: `ro` or `rw`                                                |
| generic-application.vault.engines.db.enabled                                  | bool   | false                                                                                     | Vault database secrets engine enabled flag                                 |
| generic-application.vault.engines.db.config.databases[`{i}`].options          | string |                                                                                           | Vault database options                                                     |
| generic-application.vault.engines.db.config.databases[`{i}`].default_ttl      | string | 1h                                                                                        | Vault database token default lease Time-To-Live (TTL)                      |
| generic-application.vault.engines.db.config.databases[`{i}`].max_ttl          | string | 1h                                                                                        | Vault database token maximum lease Time-To-Live (TTL)                      |
| generic-application.vault.engines.kv.enabled                                  | bool   | false                                                                                     | Vault kv secrets engine enabled flag                                       |
| generic-application.vault.engines.kv.readOnly                                 | bool   | false                                                                                     | Vault kv secrets engine read-only enabled flag                             |
| generic-application.vaultAgent.enabled                                        | bool   | false                                                                                     | Vault agent enabled flag                                                   |
| generic-application.vaultAgent.securityContext.runAsUser                      | int    |                                                                                           | Vault agent user (uid)                                                     |
| generic-application.vaultAgent.securityContext.runAsGroup                     | int    |                                                                                           | Vault agent group (gid)                                                    |
| generic-application.vaultAgent.db.template.type                               | string | generic                                                                                   | Vault agent database template type: `generic`, or `quarkus`                |

### Notes

1. If Vault kv secrets engine is enabled, the secret path for your application is set to
   "/secret/\<k8s-package-namespace\>".

2. If the Vault agent is disabled, the application is responsible for obtaining a token to access its secrets and
   credentials to access its databases.
