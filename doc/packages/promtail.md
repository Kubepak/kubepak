# 'promtail' Package

## Disclaimer

Intended for development or testing only.

## Description

A package for Promtail, an agent which ships the contents of local logs to a Loki instance.

## Values

| Name                                              | Type           | Default                                        | Description                                                                                                                                                                                                                                                                                          |
|---------------------------------------------------|----------------|------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| promtail.image.registry                           | string         |                                                | Image registry                                                                                                                                                                                                                                                                                       |
| promtail.image.repository                         | string         |                                                | Image repository                                                                                                                                                                                                                                                                                     |
| promtail.image.tag                                | string         |                                                | Image tag                                                                                                                                                                                                                                                                                            |
| promtail.clients[`{i}`].url                       | string         | http://loki-gateway.dev-loki.svc.cluster.local | Clients that uses the data                                                                                                                                                                                                                                                                           |
| promtail.clients[`{i}`].tenantName                | string         | loki                                           | Tenant name that matches the grafana `dataSources.tenantName`                                                                                                                                                                                                                                        |
| promtail.logModifications.drops[`{i}`]            | list or string | []                                             | If you provide multiple options they will be treated like an AND clause. If you wish to drop with an OR clause, then specify multiple drop stages.                                                                                                                                                   |
| promtail.logModifications.drops[`{i}`].source     | string         | []                                             | (Not required) Single name or names list of extracted data. If empty, uses the log message. (ex. ["namespace", "app"], "label")                                                                                                                                                                      |
| promtail.logModifications.drops[`{i}`].separator  | string         |                                                | (Not required) Separator placed between concatenated extracted data names. The default separator is a semicolon.                                                                                                                                                                                     |
| promtail.logModifications.drops[`{i}`].expression | string         |                                                | (Not required) RE2 expression. If `source` is provided and it's a list, the regex will attempt to match the concatenated sources. If no source is provided, then the regex attempts to match the log line.                                                                                           |
| promtail.logModifications.drops[`{i}`].value      | string         |                                                | (Not required) Can only be specified when source is specified. If `source` is provided and it's a list, the value will attempt to match the concatenated sources. It is an error to specify value and expression. If the value provided is an exact match for the `source` the line will be dropped. |
| promtail.logModifications.drops[`{i}`].olderThan  | string         |                                                | (Not required) If the log line timestamp is older than the current time minus the provided duration it will be dropped. (ex. 24h, 7d, 1440m)                                                                                                                                                         |
| promtail.logModifications.drops[`{i}`].longerThan | string or int  |                                                | (Not required) Value in bytes. Any log line longer than this value will be dropped. Can be specified as an exact number of bytes in integer format: 8192. Or can be expressed with a suffix such as 8kb                                                                                              |
| promtail.logModifications.drops[`{i}`].dropReason | string         |                                                | (Not required) By default the reason label will be `drop_stage`. However you can optionally specify a custom value to be used in the `reason` label of that metric here.                                                                                                                             |
